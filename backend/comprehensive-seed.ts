/**
 * Comprehensive Seed Data Based on Current Database
 * 
 * This seed creates a complete dataset based on existing data
 * with additional realistic data for testing
 */

import bcrypt from "bcryptjs";
import prisma from "./lib/prisma.js";

async function main() {
  console.log("üå± Starting comprehensive seed based on existing data...");

  try {
    // Clear existing data (optional - comment out if you want to keep existing data)
    console.log("üßπ Clearing existing data...");
    await prisma.userFavoriteCollection.deleteMany();
    await prisma.companyPartnership.deleteMany();
    await prisma.companyMetrics.deleteMany();
    await prisma.adminReport.deleteMany();
    await prisma.aIAnalysis.deleteMany();
    await prisma.billOfMaterial.deleteMany();
    await prisma.companyCategory.deleteMany();
    await prisma.file.deleteMany();
    await prisma.productionRevision.deleteMany();
    await prisma.sharedCategoryMapping.deleteMany();
    await prisma.workshop.deleteMany();
    await prisma.qualityControl.deleteMany();
    await prisma.revision.deleteMany();
    await prisma.orderNegotiation.deleteMany();
    await prisma.task.deleteMany();
    await prisma.notification.deleteMany();
    await prisma.message.deleteMany();
    await prisma.sample.deleteMany();
    await prisma.libraryItem.deleteMany();
    await prisma.productionStageUpdate.deleteMany();
    await prisma.productionTracking.deleteMany();
    await prisma.order.deleteMany();
    await prisma.collection.deleteMany();
    await prisma.category.deleteMany();
    await prisma.standardCategory.deleteMany();
    await prisma.company.deleteMany();
    await prisma.user.deleteMany();

    // ==========================================
    // 1. ADMIN USER
    // ==========================================
    console.log("\nüë§ Creating Admin User...");

    const adminPassword = await bcrypt.hash("Admin123!", 10);
    const admin = await prisma.user.create({
      data: {
        email: "admin@protexflow.com",
        name: "System Admin",
        firstName: "System",
        lastName: "Admin",
        password: adminPassword,
        role: "ADMIN",
        isActive: true,
        emailVerified: true,
        emailNotifications: true,
        pushNotifications: true,
        language: "tr",
        timezone: "Europe/Istanbul",
        isCompanyOwner: false,
      },
    });
    console.log("‚úÖ Admin created:", admin.email);

    // ==========================================
    // 2. MANUFACTURER COMPANIES & USERS
    // ==========================================
    console.log("\nüè≠ Creating Manufacturer Companies...");

    // Manufacturer 1: TextilePro
    const manufacturerOwner1Password = await bcrypt.hash("Owner123!", 10);
    const manufacturerOwner1 = await prisma.user.create({
      data: {
        email: "owner@textilepro.com",
        name: "Ahmet Yƒ±lmaz",
        firstName: "Ahmet",
        lastName: "Yƒ±lmaz",
        password: manufacturerOwner1Password,
        role: "COMPANY_OWNER",
        isActive: true,
        emailVerified: true,
        emailNotifications: true,
        pushNotifications: true,
        language: "tr",
        timezone: "Europe/Istanbul",
        isCompanyOwner: true,
        department: "MANAGEMENT",
        jobTitle: "Genel M√ºd√ºr",
      },
    });

    const manufacturerCompany1 = await prisma.company.create({
      data: {
        name: "TextilePro Manufacturing",
        email: "info@textilepro.com",
        phone: "+90 212 555 0101",
        address: "Sanayi Mahallesi, Fabrika Caddesi No:15",
        city: "ƒ∞stanbul",
        country: "Turkey",
        website: "https://textilepro.com",
        type: "MANUFACTURER",
        description: "Premium kalitede tekstil √ºretimi yapan √∂nc√º firma. 25 yƒ±llƒ±k deneyim ile m√º≈üterilerine en kaliteli hizmeti sunuyor.",
        ownerId: manufacturerOwner1.id,
        isActive: true,
        subscriptionPlan: "PROFESSIONAL",
        subscriptionStatus: "ACTIVE",
        maxUsers: 50,
        maxSamples: 500,
        maxOrders: 200,
        maxCollections: 100,
        maxStorageGB: 100.0,
        isPublicProfile: true,
        profileSlug: "textilepro",
      },
    });

    await prisma.user.update({
      where: { id: manufacturerOwner1.id },
      data: { companyId: manufacturerCompany1.id },
    });

    // Manufacturer 2: FashionWorks
    const manufacturerOwner2Password = await bcrypt.hash("Owner456!", 10);
    const manufacturerOwner2 = await prisma.user.create({
      data: {
        email: "owner@fashionworks.com",
        name: "Mehmet Demir",
        firstName: "Mehmet",
        lastName: "Demir",
        password: manufacturerOwner2Password,
        role: "COMPANY_OWNER",
        isActive: true,
        emailVerified: true,
        emailNotifications: true,
        pushNotifications: true,
        language: "tr",
        timezone: "Europe/Istanbul",
        isCompanyOwner: true,
        department: "MANAGEMENT",
        jobTitle: "CEO",
      },
    });

    const manufacturerCompany2 = await prisma.company.create({
      data: {
        name: "FashionWorks Textile",
        email: "info@fashionworks.com",
        phone: "+90 216 555 0202",
        address: "Organize Sanayi B√∂lgesi, 2. Kƒ±sƒ±m No:45",
        city: "Bursa",
        country: "Turkey",
        website: "https://fashionworks.com",
        type: "MANUFACTURER",
        description: "Modern teknoloji ile donatƒ±lmƒ±≈ü tekstil √ºretim tesisi. Kalite ve hƒ±z odaklƒ± yakla≈üƒ±m.",
        ownerId: manufacturerOwner2.id,
        isActive: true,
        subscriptionPlan: "PROFESSIONAL",
        subscriptionStatus: "ACTIVE",
        maxUsers: 100,
        maxSamples: 1000,
        maxOrders: 500,
        maxCollections: 200,
        maxStorageGB: 200.0,
        isPublicProfile: true,
        profileSlug: "fashionworks",
      },
    });

    await prisma.user.update({
      where: { id: manufacturerOwner2.id },
      data: { companyId: manufacturerCompany2.id },
    });

    console.log("‚úÖ Manufacturer companies created");

    // ==========================================
    // 3. BUYER COMPANIES & USERS
    // ==========================================
    console.log("\nüè¢ Creating Buyer Companies...");

    // Buyer 1: Fashion Retail
    const buyerOwner1Password = await bcrypt.hash("Buyer123!", 10);
    const buyerOwner1 = await prisma.user.create({
      data: {
        email: "owner@fashionretail.com",
        name: "Elif Kaya",
        firstName: "Elif",
        lastName: "Kaya",
        password: buyerOwner1Password,
        role: "COMPANY_OWNER",
        isActive: true,
        emailVerified: true,
        emailNotifications: true,
        pushNotifications: true,
        language: "tr",
        timezone: "Europe/Istanbul",
        isCompanyOwner: true,
        department: "MANAGEMENT",
        jobTitle: "CEO",
      },
    });

    const buyerCompany1 = await prisma.company.create({
      data: {
        name: "Fashion Retail Co.",
        email: "info@fashionretail.com",
        phone: "+90 212 555 0303",
        address: "Merkez Mahallesi, Ticaret Sokak No:42",
        city: "ƒ∞stanbul",
        country: "Turkey",
        website: "https://fashionretail.com",
        type: "BUYER",
        description: "Modern ve ≈üƒ±k giyim √ºr√ºnlerini m√º≈üterilerine ula≈ütƒ±ran perakende maƒüaza zinciri. Kaliteli ve uygun fiyatlƒ± moda.",
        ownerId: buyerOwner1.id,
        isActive: true,
        subscriptionPlan: "STARTER",
        subscriptionStatus: "ACTIVE",
        maxUsers: 10,
        maxSamples: 100,
        maxOrders: 50,
        maxCollections: 20,
        maxStorageGB: 10.0,
        isPublicProfile: false,
      },
    });

    await prisma.user.update({
      where: { id: buyerOwner1.id },
      data: { companyId: buyerCompany1.id },
    });

    // Buyer 2: StyleHub
    const buyerOwner2Password = await bcrypt.hash("Buyer456!", 10);
    const buyerOwner2 = await prisma.user.create({
      data: {
        email: "owner@stylehub.com",
        name: "Zeynep √ñzkan",
        firstName: "Zeynep",
        lastName: "√ñzkan",
        password: buyerOwner2Password,
        role: "COMPANY_OWNER",
        isActive: true,
        emailVerified: true,
        emailNotifications: true,
        pushNotifications: true,
        language: "tr",
        timezone: "Europe/Istanbul",
        isCompanyOwner: true,
        department: "MANAGEMENT",
        jobTitle: "Creative Director",
      },
    });

    const buyerCompany2 = await prisma.company.create({
      data: {
        name: "StyleHub Fashion",
        email: "info@stylehub.com",
        phone: "+90 312 555 0404",
        address: "√áankaya Mahallesi, Moda Caddesi No:78",
        city: "Ankara",
        country: "Turkey",
        website: "https://stylehub.com",
        type: "BUYER",
        description: "Yaratƒ±cƒ± tasarƒ±mlar ve √∂zg√ºn koleksiyonlar sunan moda platformu. Gen√ß ve dinamik ekibi ile trend belirleyici.",
        ownerId: buyerOwner2.id,
        isActive: true,
        subscriptionPlan: "PROFESSIONAL",
        subscriptionStatus: "ACTIVE",
        maxUsers: 25,
        maxSamples: 250,
        maxOrders: 100,
        maxCollections: 50,
        maxStorageGB: 25.0,
        isPublicProfile: true,
        profileSlug: "stylehub",
      },
    });

    await prisma.user.update({
      where: { id: buyerOwner2.id },
      data: { companyId: buyerCompany2.id },
    });

    console.log("‚úÖ Buyer companies created");

    // ==========================================
    // 4. ADDITIONAL EMPLOYEES
    // ==========================================
    console.log("\nüë• Creating Additional Employees...");

    // TextilePro employees
    const textileProEmployee1 = await prisma.user.create({
      data: {
        email: "production@textilepro.com",
        name: "Fatma ≈ûahin",
        firstName: "Fatma",
        lastName: "≈ûahin",
        password: await bcrypt.hash("Employee123!", 10),
        role: "COMPANY_EMPLOYEE",
        isActive: true,
        emailVerified: true,
        emailNotifications: true,
        pushNotifications: true,
        language: "tr",
        timezone: "Europe/Istanbul",
        isCompanyOwner: false,
        companyId: manufacturerCompany1.id,
        department: "PRODUCTION",
        jobTitle: "√úretim M√ºd√ºr√º",
      },
    });

    const textileProEmployee2 = await prisma.user.create({
      data: {
        email: "quality@textilepro.com",
        name: "Ali Veli",
        firstName: "Ali",
        lastName: "Veli",
        password: await bcrypt.hash("Employee123!", 10),
        role: "COMPANY_EMPLOYEE",
        isActive: true,
        emailVerified: true,
        emailNotifications: true,
        pushNotifications: true,
        language: "tr",
        timezone: "Europe/Istanbul",
        isCompanyOwner: false,
        companyId: manufacturerCompany1.id,
        department: "QUALITY",
        jobTitle: "Kalite Kontrol Uzmanƒ±",
      },
    });

    // Fashion Retail employees
    const fashionRetailEmployee1 = await prisma.user.create({
      data: {
        email: "buyer@fashionretail.com",
        name: "Ay≈üe Yƒ±lmaz",
        firstName: "Ay≈üe",
        lastName: "Yƒ±lmaz",
        password: await bcrypt.hash("Employee123!", 10),
        role: "COMPANY_EMPLOYEE",
        isActive: true,
        emailVerified: true,
        emailNotifications: true,
        pushNotifications: true,
        language: "tr",
        timezone: "Europe/Istanbul",
        isCompanyOwner: false,
        companyId: buyerCompany1.id,
        department: "PURCHASING",
        jobTitle: "Satƒ±n Alma Uzmanƒ±",
      },
    });

    console.log("‚úÖ Additional employees created");

    // ==========================================
    // 5. STANDARD CATEGORIES
    // ==========================================
    console.log("\nüìÇ Creating Standard Categories...");

    const standardCategories = [
      {
        name: "Kadƒ±n Giyim",
        description: "Kadƒ±n giyim kategorisi",
        code: "WOMEN",
        level: "MAIN",
        icon: "üëó",
        isActive: true,
        createdBy: admin.id,
      },
      {
        name: "Erkek Giyim",
        description: "Erkek giyim kategorisi",
        code: "MEN",
        level: "MAIN",
        icon: "üëî",
        isActive: true,
        createdBy: admin.id,
      },
      {
        name: "√áocuk Giyim",
        description: "√áocuk giyim kategorisi",
        code: "KIDS",
        level: "MAIN",
        icon: "üë∂",
        isActive: true,
        createdBy: admin.id,
      },
      {
        name: "Aksesuar",
        description: "Giyim aksesuarlarƒ±",
        code: "ACCESSORIES",
        level: "MAIN",
        icon: "üëú",
        isActive: true,
        createdBy: admin.id,
      },
    ];

    for (const categoryData of standardCategories) {
      const { createdBy, ...data } = categoryData;
      await prisma.standardCategory.create({
        data: {
          ...data,
          createdBy: {
            connect: { id: createdBy }
          }
        },
      });
    }

    console.log("‚úÖ Standard categories created");

    // ==========================================
    // 6. COMPANY CATEGORIES
    // ==========================================
    console.log("\nüè∑Ô∏è Creating Company Categories...");

    const companyCategories = [
      {
        name: "Denim Koleksiyonu",
        description: "Denim √ºr√ºnleri koleksiyonu",
        companyId: manufacturerCompany1.id,
        createdBy: manufacturerOwner1.id,
      },
      {
        name: "Yazlƒ±k Koleksiyon",
        description: "Yaz aylarƒ± i√ßin hafif kuma≈ülar",
        companyId: manufacturerCompany1.id,
        createdBy: manufacturerOwner1.id,
      },
      {
        name: "Kƒ±≈ülƒ±k Koleksiyon",
        description: "Kƒ±≈ü aylarƒ± i√ßin kalƒ±n kuma≈ülar",
        companyId: manufacturerCompany1.id,
        createdBy: manufacturerOwner1.id,
      },
    ];

    for (const categoryData of companyCategories) {
      const { createdBy, companyId, ...data } = categoryData;
      await prisma.category.create({
        data: {
          ...data,
          author: {
            connect: { id: createdBy }
          },
          company: {
            connect: { id: companyId }
          }
        },
      });
    }

    console.log("‚úÖ Company categories created");

    // ==========================================
    // 7. LIBRARY ITEMS
    // ==========================================
    console.log("\nüìö Creating Library Items...");

    const libraryItems = [
      {
        name: "Premium Cotton",
        category: "FABRIC",
        scope: "COMPANY_CUSTOM",
        description: "Y√ºksek kaliteli pamuk kuma≈ü",
        data: {
          material: "100% Cotton",
          weight: "180 GSM",
          width: "150cm",
          color: "White",
        },
        companyId: manufacturerCompany1.id,
        createdBy: manufacturerOwner1.id,
      },
      {
        name: "Denim Blue",
        category: "FABRIC",
        scope: "COMPANY_CUSTOM",
        description: "Klasik mavi denim kuma≈ü",
        data: {
          material: "98% Cotton, 2% Elastane",
          weight: "320 GSM",
          width: "150cm",
          color: "Blue",
        },
        companyId: manufacturerCompany1.id,
        createdBy: manufacturerOwner1.id,
      },
      {
        name: "Polyester Blend",
        category: "FABRIC",
        scope: "COMPANY_CUSTOM",
        description: "Dayanƒ±klƒ± polyester karƒ±≈üƒ±m kuma≈ü",
        data: {
          material: "65% Polyester, 35% Cotton",
          weight: "200 GSM",
          width: "150cm",
          color: "Black",
        },
        companyId: manufacturerCompany1.id,
        createdBy: manufacturerOwner1.id,
      },
      {
        name: "Silk Satin",
        category: "FABRIC",
        scope: "COMPANY_CUSTOM",
        description: "L√ºks ipek saten kuma≈ü",
        data: {
          material: "100% Silk",
          weight: "120 GSM",
          width: "140cm",
          color: "Ivory",
        },
        companyId: manufacturerCompany1.id,
        createdBy: manufacturerOwner1.id,
      },
      {
        name: "Wool Blend",
        category: "FABRIC",
        scope: "COMPANY_CUSTOM",
        description: "Sƒ±cak y√ºn karƒ±≈üƒ±m kuma≈ü",
        data: {
          material: "70% Wool, 30% Acrylic",
          weight: "280 GSM",
          width: "150cm",
          color: "Gray",
        },
        companyId: manufacturerCompany1.id,
        createdBy: manufacturerOwner1.id,
      },
    ];

    for (const itemData of libraryItems) {
      const { createdBy, companyId, ...data } = itemData;
      await prisma.libraryItem.create({
        data: {
          ...data,
          createdBy: {
            connect: { id: createdBy }
          },
          company: {
            connect: { id: companyId }
          }
        },
      });
    }

    console.log("‚úÖ Library items created");

    // ==========================================
    // 8. COLLECTIONS
    // ==========================================
    console.log("\nüëó Creating Collections...");

    const collections = [
      {
        name: "Barrel Jeans - Jazzie",
        description: "The Jazzie barrel-fit jeans present a mid-waist, comfortable fit with a relaxed silhouette. The cross-hatch surface of authentic black/black denim.",
        modelCode: "MODEL-1761215687761",
        season: "Spring/Summer 2025",
        gender: "WOMEN",
        isActive: true,
        companyId: manufacturerCompany1.id,
        createdBy: manufacturerOwner1.id,
        images: JSON.stringify([
          "https://example.com/jeans1.jpg",
          "https://example.com/jeans2.jpg",
        ]),
      },
      {
        name: "Classic T-Shirt",
        description: "Temel beyaz pamuk t-shirt. G√ºnl√ºk kullanƒ±m i√ßin ideal.",
        modelCode: "MODEL-TSHIRT-001",
        season: "All Season",
        gender: "UNISEX",
        isActive: true,
        companyId: manufacturerCompany1.id,
        createdBy: manufacturerOwner1.id,
        images: JSON.stringify([
          "https://example.com/tshirt1.jpg",
        ]),
      },
      {
        name: "Elegant Blouse",
        description: "≈ûƒ±k ve zarif bluz. ƒ∞≈ü ve sosyal ortamlar i√ßin uygun.",
        modelCode: "MODEL-BLOUSE-001",
        season: "Spring/Summer 2025",
        gender: "WOMEN",
        isActive: true,
        companyId: manufacturerCompany1.id,
        createdBy: manufacturerOwner1.id,
        images: JSON.stringify([
          "https://example.com/blouse1.jpg",
        ]),
      },
    ];

    for (const collectionData of collections) {
      const { createdBy, companyId, ...data } = collectionData;
      await prisma.collection.create({
        data: {
          ...data,
          author: {
            connect: { id: createdBy }
          },
          company: {
            connect: { id: companyId }
          }
        },
      });
    }

    console.log("‚úÖ Collections created");

    // ==========================================
    // 9. ORDERS
    // ==========================================
    console.log("\nüì¶ Creating Orders...");

    // Get the first collection ID
    const firstCollection = await prisma.collection.findFirst({
      where: { companyId: manufacturerCompany1.id }
    });

    const orders = [
      {
        orderNumber: "ORD-1761215790427-1",
        quantity: 120,
        unitPrice: 20,
        totalPrice: 2400,
        currency: "USD",
        deadline: new Date("2025-11-19T21:00:00.000Z"),
        status: "QUOTE_SENT",
        productionDays: 19,
        customerId: buyerOwner1.id,
        manufactureId: manufacturerOwner1.id,
        collectionId: firstCollection?.id || 1,
        companyId: manufacturerCompany1.id,
        customerQuotedPrice: 20,
        customerQuoteSentAt: new Date("2025-10-23T10:36:30.428Z"),
        negotiationStatus: "OPEN",
      },
      {
        orderNumber: "ORD-1761215790427-2",
        quantity: 50,
        unitPrice: 15,
        totalPrice: 750,
        currency: "USD",
        deadline: new Date("2025-12-15T21:00:00.000Z"),
        status: "PENDING",
        productionDays: 14,
        customerId: buyerOwner2.id,
        manufactureId: manufacturerOwner1.id,
        collectionId: firstCollection?.id || 1,
        companyId: manufacturerCompany1.id,
        negotiationStatus: "OPEN",
      },
    ];

    for (const orderData of orders) {
      await prisma.order.create({
        data: orderData,
      });
    }

    console.log("‚úÖ Orders created");

    // ==========================================
    // 10. PRODUCTION TRACKING
    // ==========================================
    console.log("\nüè≠ Creating Production Tracking...");

    // Get the first order ID
    const firstOrder = await prisma.order.findFirst({
      where: { companyId: manufacturerCompany1.id }
    });

    const productionTracking = await prisma.productionTracking.create({
      data: {
        orderId: firstOrder?.id || 1,
        currentStage: "PLANNING",
        overallStatus: "BLOCKED",
        progress: 0,
        estimatedStartDate: new Date("2025-10-23T11:23:24.939Z"),
        estimatedEndDate: new Date("2025-11-11T11:23:24.939Z"),
        notes: "G√ºncellenen √ºretim planƒ± - Toplam 19 g√ºn",
        customerApprovalStatus: "REJECTED",
        customerNote: "Plan uygun deƒüil, revizyon gerekiyor.",
        revisionCount: 5,
        companyId: manufacturerCompany1.id,
      },
    });

    // Production Stage Updates
    const stageUpdates = [
      {
        productionId: productionTracking.id,
        stage: "FABRIC",
        status: "NOT_STARTED",
        estimatedDays: 7,
        notes: "Kuma≈ü tedarik a≈üamasƒ±",
      },
      {
        productionId: productionTracking.id,
        stage: "CUTTING",
        status: "NOT_STARTED",
        estimatedDays: 2,
        notes: "Kesim i≈ülemleri",
      },
      {
        productionId: productionTracking.id,
        stage: "SEWING",
        status: "NOT_STARTED",
        estimatedDays: 5,
        notes: "Dikim i≈ülemleri",
      },
      {
        productionId: productionTracking.id,
        stage: "PRESSING",
        status: "NOT_STARTED",
        estimatedDays: 1,
        notes: "√út√º ve pres i≈ülemleri",
      },
      {
        productionId: productionTracking.id,
        stage: "QUALITY",
        status: "NOT_STARTED",
        estimatedDays: 1,
        notes: "Kalite kontrol",
      },
      {
        productionId: productionTracking.id,
        stage: "PACKAGING",
        status: "NOT_STARTED",
        estimatedDays: 1,
        notes: "Paketleme",
      },
      {
        productionId: productionTracking.id,
        stage: "SHIPPING",
        status: "NOT_STARTED",
        estimatedDays: 1,
        notes: "Sevkiyat hazƒ±rlƒ±k",
      },
    ];

    for (const stageData of stageUpdates) {
      await prisma.productionStageUpdate.create({
        data: stageData,
      });
    }

    console.log("‚úÖ Production tracking created");

    // ==========================================
    // 11. TASKS
    // ==========================================
    console.log("\n‚úÖ Creating Tasks...");

    const tasks = [
      {
        title: "Kuma≈ü Tedarik Planlamasƒ±",
        description: "Gerekli kuma≈ü miktarƒ±nƒ±n hesaplanmasƒ± ve tedarik√ßi ile g√∂r√º≈üme",
        type: "PRODUCTION_STAGE",
        priority: "HIGH",
        status: "TODO",
        dueDate: new Date("2025-10-25T09:00:00.000Z"),
        userId: textileProEmployee1.id,
        orderId: firstOrder?.id || 1,
      },
      {
        title: "Kalite Kontrol Prosed√ºrleri",
        description: "√úretim s√ºrecinde kalite kontrol noktalarƒ±nƒ±n belirlenmesi",
        type: "QUALITY_CHECK",
        priority: "MEDIUM",
        status: "IN_PROGRESS",
        dueDate: new Date("2025-10-30T17:00:00.000Z"),
        userId: textileProEmployee2.id,
        orderId: firstOrder?.id || 1,
      },
    ];

    for (const taskData of tasks) {
      await prisma.task.create({
        data: taskData,
      });
    }

    console.log("‚úÖ Tasks created");

    // ==========================================
    // 12. NOTIFICATIONS
    // ==========================================
    console.log("\nüîî Creating Notifications...");

    const notifications = [
      {
        title: "Yeni Sipari≈ü",
        message: "Fashion Retail Co. tarafƒ±ndan yeni bir sipari≈ü olu≈üturuldu.",
        type: "ORDER_CREATED",
        isRead: false,
        userId: manufacturerOwner1.id,
        companyId: manufacturerCompany1.id,
        orderId: 1,
      },
      {
        title: "√úretim Planƒ± Reddedildi",
        message: "√úretim planƒ±nƒ±z m√º≈üteri tarafƒ±ndan reddedildi. L√ºtfen revize edin.",
        type: "PRODUCTION_REJECTED",
        isRead: false,
        userId: manufacturerOwner1.id,
        companyId: manufacturerCompany1.id,
        orderId: 1,
      },
    ];

    for (const notificationData of notifications) {
      await prisma.notification.create({
        data: notificationData,
      });
    }

    console.log("‚úÖ Notifications created");

    // ==========================================
    // 13. ORDER NEGOTIATIONS
    // ==========================================
    console.log("\nüí¨ Creating Order Negotiations...");

    const orderNegotiation = await prisma.orderNegotiation.create({
      data: {
        orderId: 1,
        customerId: buyerOwner1.id,
        manufacturerId: manufacturerOwner1.id,
        type: "PRICE_NEGOTIATION",
        status: "ACTIVE",
        customerOffer: 18,
        manufacturerCounterOffer: 20,
        finalAgreedPrice: null,
        customerNote: "Fiyat biraz y√ºksek, indirim yapabilir misiniz?",
        manufacturerNote: "Kalite ve hƒ±z i√ßin bu fiyat uygun.",
        companyId: manufacturerCompany1.id,
      },
    });

    console.log("‚úÖ Order negotiations created");

    console.log("\nüîê Login Credentials:");
    console.log("\nüë§ Admin:");
    console.log("   Email: admin@protexflow.com");
    console.log("   Password: Admin123!");
    console.log("\nüè≠ Manufacturer (TextilePro):");
    console.log("   Owner: owner@textilepro.com / Owner123!");
    console.log("   Production: production@textilepro.com / Employee123!");
    console.log("   Quality: quality@textilepro.com / Employee123!");
    console.log("\nüè≠ Manufacturer (FashionWorks):");
    console.log("   Owner: owner@fashionworks.com / Owner456!");
    console.log("\nüè¢ Buyer (Fashion Retail):");
    console.log("   Owner: owner@fashionretail.com / Buyer123!");
    console.log("   Buyer: buyer@fashionretail.com / Employee123!");
    console.log("\nüè¢ Buyer (StyleHub):");
    console.log("   Owner: owner@stylehub.com / Buyer456!");
    console.log("\n‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ");

  } catch (error) {
    console.error("‚ùå Seed failed:", error);
    throw error;
  }
}

main()
  .then(async () => {
    await prisma.$disconnect();
    console.log("\nüéâ Comprehensive seed completed successfully!");
  })
  .catch(async (e) => {
    console.error("‚ùå Seed failed:", e);
    await prisma.$disconnect();
    process.exit(1);
  });
