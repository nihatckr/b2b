# Library Management GraphQL Operations
# For managing library items (colors, fabrics, materials, size groups, fits, certifications, seasons)

# =====================================
# QUERIES
# =====================================

# Query: Get all platform standard library items (visible to all users)
query DashboardPlatformStandards($category: String) {
  platformStandards(category: $category) {
    id
    category
    scope
    code
    name
    description
    imageUrl
    data
    tags
    isActive
    isPopular
    createdAt
    updatedAt
    company {
      id
      name
    }
    createdBy {
      id
      name
      email
    }
    # ðŸ”— Certifications
    certifications {
      id
      code
      name
      data
      tags
      iconValue
      isActive
      createdAt
    }
  }
}

# Query: Get company's custom library items (only visible to company members)
query DashboardMyCompanyLibrary($category: String) {
  myCompanyLibrary(category: $category) {
    id
    category
    scope
    code
    name
    description
    imageUrl
    data
    tags
    isActive
    isPopular
    createdAt
    updatedAt
    standardItem {
      id
      name
      code
    }
    createdBy {
      id
      name
      email
    }
    # ðŸ”— Certifications
    certifications {
      id
      code
      name
      data
      tags
      iconValue
      isActive
      createdAt
    }
  }
}

# Query: Get all library items with filters (combined view)
query DashboardLibraryItems(
  $filter: LibraryFilterInput
  $limit: Int
  $offset: Int
) {
  libraryItems(filter: $filter, limit: $limit, offset: $offset) {
    id
    category
    scope
    code
    name
    description
    imageUrl
    data
    tags
    isActive
    isPopular
    createdAt
    updatedAt
    company {
      id
      name
    }
    standardItem {
      id
      name
      code
    }
    createdBy {
      id
      name
      email
    }
    # ðŸ”— Certifications
    certifications {
      id
      code
      name
      data
      tags
      iconValue
      isActive
      createdAt
    }
  }
}

# Query: Get single library item by ID
query DashboardLibraryItem($id: Int!) {
  libraryItem(id: $id) {
    id
    category
    scope
    code
    name
    description
    imageUrl
    data
    tags
    isActive
    isPopular
    createdAt
    updatedAt
    company {
      id
      name
      email
    }
    standardItem {
      id
      name
      code
      description
      data
    }
    createdBy {
      id
      name
      email
    }
  }
}

# Query: Get library item by code
query DashboardLibraryItemByCode($code: String!) {
  libraryItemByCode(code: $code) {
    id
    category
    scope
    code
    name
    description
    imageUrl
    data
    tags
    isActive
    isPopular
  }
}

# =====================================
# MUTATIONS
# =====================================

# Mutation: Create new library item
mutation DashboardCreateLibraryItem($input: CreateLibraryItemInput!) {
  createLibraryItem(input: $input) {
    id
    category
    scope
    code
    name
    description
    imageUrl
    data
    tags
    isActive
    isPopular
    createdAt
    company {
      id
      name
    }
    standardItem {
      id
      name
      code
    }
    createdBy {
      id
      name
      email
    }
    # ðŸ”— Certifications
    certifications {
      id
      code
      name
      data
      tags
      iconValue
      isActive
      createdAt
    }
  }
}

# Mutation: Update existing library item
mutation DashboardUpdateLibraryItem(
  $id: Int!
  $input: UpdateLibraryItemInput!
) {
  updateLibraryItem(id: $id, input: $input) {
    id
    category
    scope
    code
    name
    description
    imageUrl
    data
    tags
    isActive
    isPopular
    updatedAt
    company {
      id
      name
    }
    standardItem {
      id
      name
      code
    }
    createdBy {
      id
      name
      email
    }
  }
}

# Mutation: Delete library item (soft delete - sets isActive = false)
mutation DashboardDeleteLibraryItem($id: Int!) {
  deleteLibraryItem(id: $id)
}

# Mutation: Upload single file (for fabric images, etc.)
mutation DashboardSingleUpload(
  $file: File!
  $category: String
  $description: String
) {
  singleUpload(file: $file, category: $category, description: $description)
}

# =====================================
# CATEGORY QUERIES (for category management)
# =====================================

# Query: Get standard categories (platform-wide categories)
query DashboardStandardCategories($level: String, $parentId: Int) {
  standardCategories(level: $level, parentId: $parentId) {
    id
    code
    name
    description
    level
    order
    icon
    image
    isActive
    isPublic
    keywords
    tags
    parentId
    subCategories {
      id
      name
      code
      level
    }
  }
}

# Query: Get company categories (company-specific categories)
query DashboardMyCompanyCategories {
  myCompanyCategories {
    id
    type
    name
    description
    internalCode
    isActive
    customFields
    standardCategoryId
    parentId
    subCategories {
      id
      name
      internalCode
    }
  }
}
