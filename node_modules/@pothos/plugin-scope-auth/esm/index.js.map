{"version":3,"sources":["../src/index.ts"],"names":["SchemaBuilder","BasePlugin","PothosSchemaError","RootFieldBuilder","isTypeOfHelper","RequestCache","resolveHelper","createFieldAuthScopesStep","createFieldGrantScopesStep","createResolveStep","createTypeAuthScopesStep","createTypeGrantScopesStep","pluginName","inResolveType","PothosScopeAuthPlugin","wrapResolve","resolver","fieldConfig","options","disableScopeAuth","typeConfig","buildCache","getTypeConfig","parentType","graphqlKind","authorizedOnSubscribe","builder","scopeAuth","authorizeOnSubscribe","kind","nonRoot","runTypeScopesOnField","pothosOptions","runScopesOnType","steps","createResolveSteps","length","wrapSubscribe","subscriber","createSubscribeSteps","wrapResolveType","resolveType","args","wrapIsTypeOf","isTypeOf","shouldRunTypeScopes","createStepsForType","forField","runSteps","source","context","info","skipTypeScopes","skipInterfaceScopes","parentAuthScope","authScopes","parentGrantScopes","grantScopes","interfaceConfigs","interfaces","map","iface","push","name","interfaceConfig","stepsForType","fieldAuthScopes","fieldGrantScopes","fieldBuilderProto","prototype","authField","field","registerPlugin","v3","scopeAuthOptions","undefined"],"mappings":"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"}