{"version":3,"sources":["../../src/util/cursors.ts"],"names":["decodeBase64","encodeBase64","PothosValidationError","getModel","extendWithUsage","DEFAULT_MAX_SIZE","DEFAULT_SIZE","formatCursorChunk","value","Date","String","Number","formatPrismaCursor","record","fields","cursorFormatter","JSON","stringify","map","name","parsePrismaCursor","cursor","decoded","type","match","parseInt","parse","BigInt","parseID","id","dataType","parseFloat","Buffer","from","getDefaultIDSerializer","modelName","fieldName","builder","model","field","find","f","parent","serializeID","primaryKey","join","n","kind","index","uniqueIndexes","idx","getDefaultIDParser","parts","Array","isArray","result","i","length","Uint8Array","toString","parseCompositeCursor","parsed","forEach","prismaCursorConnectionQuery","args","ctx","maxSize","defaultSize","parseCursor","before","after","first","last","maxSizeForConnection","defaultSizeForConnection","take","Math","min","skip","wrapConnectionResult","results","totalCount","resolveNode","edges","gotFullResults","abs","hasNextPage","hasPreviousPage","nodes","slice","connection","pageInfo","startCursor","endCursor","node","resolvePrismaCursorConnection","options","resolve","query","getCursorFormatter","modelData","uniqueIndex","getCursorParser","parser","rawCursor"],"mappings":"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"}