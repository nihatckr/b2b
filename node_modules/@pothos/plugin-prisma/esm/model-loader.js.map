{"version":3,"sources":["../src/model-loader.ts"],"names":["createContextCache","PothosSchemaError","getDelegateFromModel","getModel","getClient","cacheKey","setLoaderMappings","selectionStateFromInfo","mergeSelection","selectionCompatible","selectionToQuery","ModelLoader","forRef","ref","modelName","findUnique","builder","model","name","getDefaultFindUnique","getFindUnique","findBy","parent","fields","primaryKeyName","primaryKey","key","join","getDefaultFindBy","idField","find","field","isId","uniqueField","isRequired","isUnique","uniqueIndex","uniqueIndexes","idx","every","f","getDefaultIDSelection","result","getCursorSelection","cursor","index","filter","Boolean","selection","column","getFindUniqueForField","fieldName","some","getSelection","info","parentType","path","queryCache","has","context","options","prisma","skipDeferredFragments","set","query","get","loadSelection","stageQuery","mappings","entry","staged","state","models","createResolvablePromise","promise","initLoad","initialModel","delegate","Map","add","nextTick","tick","then","delete","resolve","reject","findUniqueOrThrow","where","rejectOnNotFound","setTimeout","Set","Promise","resolveFn","rejectFn"],"mappings":"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"}