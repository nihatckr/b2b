{"version":3,"sources":["../src/model-loader.ts"],"names":["ModelLoader","forRef","ref","modelName","findUnique","builder","createContextCache","model","PothosSchemaError","name","getDefaultFindUnique","getFindUnique","findBy","parent","fields","primaryKeyName","primaryKey","key","join","getDefaultFindBy","getModel","idField","find","field","isId","uniqueField","isRequired","isUnique","uniqueIndex","uniqueIndexes","idx","every","f","getDefaultIDSelection","result","getCursorSelection","cursor","index","filter","Boolean","selection","column","getFindUniqueForField","fieldName","some","getSelection","info","cacheKey","parentType","path","queryCache","has","selectionStateFromInfo","context","options","prisma","skipDeferredFragments","set","query","selectionToQuery","get","loadSelection","stageQuery","mappings","setLoaderMappings","entry","staged","selectionCompatible","state","mergeSelection","models","createResolvablePromise","promise","initLoad","initialModel","delegate","getDelegateFromModel","getClient","Map","add","nextTick","tick","then","delete","resolve","reject","findUniqueOrThrow","where","rejectOnNotFound","setTimeout","Set","Promise","resolveFn","rejectFn"],"mappings":"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"}