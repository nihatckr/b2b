"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
function _export(target, all) {
    for(var name in all)Object.defineProperty(target, name, {
        enumerable: true,
        get: Object.getOwnPropertyDescriptor(all, name).get
    });
}
_export(exports, {
    get createRelationMap () {
        return createRelationMap;
    },
    get getRelationMap () {
        return getRelationMap;
    }
});
const _core = require("@pothos/core");
const getRelationMap = (0, _core.createContextCache)((datamodel)=>createRelationMap(datamodel));
function createRelationMap({ models }) {
    const relationMap = new Map();
    if (Array.isArray(models)) {
        for (const model of models){
            relationMap.set(model.name, {
                model: model.name,
                relations: new Map()
            });
        }
        for (const model of models){
            const map = relationMap.get(model.name).relations;
            for (const field of model.fields){
                if (field.kind === 'object' && relationMap.has(field.type)) {
                    map.set(field.name, relationMap.get(field.type));
                }
            }
        }
    } else {
        for (const name of Object.keys(models)){
            relationMap.set(name, {
                model: name,
                relations: new Map()
            });
        }
        for (const [name, model] of Object.entries(models)){
            const map = relationMap.get(name).relations;
            for (const field of model.fields){
                if (field.kind === 'object' && relationMap.has(field.type)) {
                    map.set(field.name, relationMap.get(field.type));
                }
            }
        }
    }
    return relationMap;
}

//# sourceMappingURL=relation-map.js.map