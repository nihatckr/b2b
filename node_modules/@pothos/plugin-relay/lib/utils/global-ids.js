"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
function _export(target, all) {
    for(var name in all)Object.defineProperty(target, name, {
        enumerable: true,
        get: Object.getOwnPropertyDescriptor(all, name).get
    });
}
_export(exports, {
    get decodeGlobalID () {
        return decodeGlobalID;
    },
    get encodeGlobalID () {
        return encodeGlobalID;
    }
});
const _core = require("@pothos/core");
function encodeGlobalID(typename, id) {
    return (0, _core.encodeBase64)(`${typename}:${id}`);
}
const typenameRegex = /^[A-Z_a-z]\w*$/;
function decodeGlobalID(globalID) {
    let decoded;
    try {
        decoded = (0, _core.decodeBase64)(globalID).split(':');
    } catch (error) {
        throw error instanceof _core.PothosValidationError ? new _core.PothosValidationError(`Invalid global ID: ${globalID}`) : error;
    }
    const [typename, id] = decoded;
    if (!typename || !id || !typenameRegex.test(typename)) {
        throw new _core.PothosValidationError(`Invalid global ID: ${globalID}`);
    }
    return {
        typename,
        id: decoded.length > 2 ? decoded.slice(1).join(':') : id
    };
}

//# sourceMappingURL=global-ids.js.map